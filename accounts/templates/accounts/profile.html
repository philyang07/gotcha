{% extends 'base.html' %}
{% block title %}Profile{% endblock %}
{% block content %}
<div class="row mb-5">
    <div class="col-lg-6 mb-3">
        <div class="card">
            <div class="card-header">Information</div>
            <div class="card-body">
                <p>Welcome {{ user.first_name }}!</p>
                <p>Your registered email is {{ user.email }}</p>
                {% if user.player.secret_code %}
                <p>Your secret code is <strong>{{ user.player.secret_code }}</strong></p>
                {% endif %}
                {% if user.player.target %}
                <p>Your target is <strong>{{ user.player.target }}</strong></p>
                {% endif %}
                {% if user.player.game.in_progress == True %}
                {% if user.player.secret_code %}
                <p>You {% if user.player.alive %}have{% else %}had{% endif %} {{ user.player.kills }} elimination{{ user.player.kills|pluralize:"s" }}.</p>
                {% endif %}
                {% if user.player == user.player.game.winner %}
                <p>Congratulations, you are the last player standing!</p>
                {% elif game.winner %}
                <p>The game has ended. {{ game.winner }} is the last person standing</p>
                {% elif user.player.alive == False %}
                <p>You were eliminated</p>
                {% endif %}
                {% endif %}
            </div>
        </div>
    </div>   
    <div class="col-lg-5">
        <div class="card" id="assignment-card">
            <div class="card-header" disabled>Completed an elimination?</div>
            <div class="card-body">
                <form action="{% url 'accounts:profile' %}" method="post">
                    {% csrf_token %}
                    {% include 'accounts/form_display.html' with form=form %}
                    <input type="submit" value="Submit" class="btn btn-primary">
                </form>
            </div>
        </div>
    </div>
</div>


{% if user.player.game.in_progress == True %}
{% if user.player.alive == True and user.player.secret_code and not user.player.game.winner %}
<a href="{% url 'accounts:manual_kill' %}" onclick="return confirm('Are you sure?')" class="btn btn-secondary">Leave the game (your killer gets your target)</a>
{% endif %}
{% endif %}
<a href="{% url 'accounts:change_details' %}" class="btn btn-secondary">Change details</a>
{% if user.player.game.in_progress == False %} 
<a href="{% url 'accounts:delete_player' %}" class="btn btn-secondary" onclick="return confirm('Are you sure? This can not be undone')" class="btn btn-secondary">Delete self</a>
{% endif %}
<br>
<!-- <a href="{% url 'accounts:logout' %}">Logout</a> -->
{% endblock %}
{% block scripts %}
{% if game.in_elimination_stage == False or player.alive == False %}
<script>
    $('#assignment-card').find('*').attr('disabled', true);
</script>
{% endif %}
{% endblock %}